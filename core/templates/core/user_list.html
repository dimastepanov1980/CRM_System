{% extends "core/base.html" %}

{% block content %}
  <h1>Users for {{ bot.name }}</h1>
  
  <form method="get">
    <label for="start_date">Start Date:</label>
    <input type="date" id="start_date" name="start_date" value="{{ request.GET.start_date }}">
    <label for="end_date">End Date:</label>
    <input type="date" id="end_date" name="end_date" value="{{ request.GET.end_date }}">
    <button type="submit">Filter</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>User ID</th>
        <th>
          <a href="?{% if request.GET.start_date %}start_date={{ request.GET.start_date }}&{% endif %}{% if request.GET.end_date %}end_date={{ request.GET.end_date }}&{% endif %}sort={% if sort == 'asc' %}desc{% else %}asc{% endif %}">Last Message Time</a>
        </th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
      <tr>
        <td><a href="{% url 'message_list' bot.id user.user_id %}">{{ user.user_id }}</a></td>
        <td>{{ user.last_message_time }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  
  <a href="{% url 'bot_list' %}" class="btn btn-secondary">Back</a>
{% endblock %}